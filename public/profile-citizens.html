<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="js/jquery-1.8.2.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <title>Profile-Page</title>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
    <script>
      $(document).ready(function(){
        document.getElementById("inputEmail").value=localStorage.getItem("name");
        $("#btnfetch").click(function(){
          //ajax call
          var urlwithdata="/fetchArecord?txtid="+$("#inputEmail").val();
          $.get(urlwithdata,function(response){
            //alert(JSON.stringify(response));
           $("#inputName").val(response[0].name);
           $("#inputNumber").val(response[0].number);
           $("#inputPassword").val(response[0].password);
           $("#inputAddress").val(response[0].address);
           $("#inputCity").val(response[0].city);
           $("#inputState").val(response[0].state);
           $("#inputZip").val(response[0].zip);
           $("#profilepicshow").prop("src","uploads/"+response[0].profilepic);
           $("#jasoos").val(response[0].profilepic);
          })
        })
      })
    </script>
  <script>
    function doshowprofile(ref) {
      var image = document.querySelector("#profilepicshow");
      image.src = URL.createObjectURL(ref.files[0]);
    }
    function dovalemail(email,err)
    {
      var r=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
      if(email.value.match(r))
      { 
        email.style.border="2px solid green";
        document.querySelector("#errE").innerHTML="Looks Good!";
      }
      else
      {
        email.style.border="2px solid red";
        err.innerHTML="Invalid!";
      }
    }
    function dovalname(name,eer)
    {
      if(name.value!="")
      { 
        name.style.border="2px solid green";
        eer.innerHTML="Looks Good!";
      }
      else
      {
        name.style.border="2px solid red";
        eer.innerHTML="Invalid!";
      }
    }
    function dovalno(no,eer)
    {
      var r=/^[6-9]{1}[0-9]{9}$/;
      if(no.value.match(r))
      { 
        no.style.border="2px solid green";
        eer.innerHTML="Looks Good!";
      }
      else
      {
        no.style.border="2px solid red";
        eer.innerHTML="Invalid!";
      }
    }
    function dovalpass(pass,eer)
    {
      var r=/(?=^.{8,}$)(?=.*\d)(?=.*[!@#$%^&*]+)(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/;
      if(pass.value.match(r))
      { 
        pass.style.border="2px solid green";
        eer.innerHTML="Looks Good!";
      }
      else
      {
        pass.style.border="2px solid red";
        eer.innerHTML="Invalid!";
      }
    }
    function dovalad(ad,eer)
      {
        if(ad.value!="")
      { 
        ad.style.border="2px solid green";
        eer.innerHTML="Looks Good!";
      }
      else
      {
        ad.style.border="2px solid red";
        eer.innerHTML="Invalid!";
      }
      }
      function dovalcity(city,eer)
      {
        if(city.value!="")
      { 
        city.style.border="2px solid green";
        eer.innerHTML="Looks Good!";
      }
      else
      {
        city.style.border="2px solid red";
        eer.innerHTML="Invalid!";
      }
      }
      function dovalzip(zip,eer)
      {
        if(zip.value!="")
      { 
        zip.style.border="2px solid green";
        eer.innerHTML="Looks Good!";
      }
      else
      {
        zip.style.border="2px solid red";
        eer.innerHTML="Invalid!";
      }
      }
      function dovalstate(state,eer)
      {
        if(state.value=="choose")
        {
          state.style.border="2px solid red";
          eer.innerHTML="Invalid!";
        }
        else
        {
          state.style.border="2px solid green";
          eer.innerHTML="Looks Good!";
        }
      }
      
  </script>
</head>

<body>
  <form method="post" enctype="multipart/form-data">
      <input type="hidden" name="jassos" id="jassos">
    <div id="body" class="container bg-light">
      <div class="row" style="background-color: lightblue;">
        <div class="col-md-12">
          <center>
            <h2 style="font-family:Georgia, 'Times New Roman', Times, serif;">Profile-Page</h2>
          </center>
        </div>
      </div>
      <div class="row mt-2 gx-5">
        <div class="col-md-10">
          <label for="inputEmail" class="form-label"
            style="font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">Email</label>
          <input type="email" class="form-control" id="inputEmail" name="txtEmail" readonly onblur="dovalemail(this,errE)"
            placeholder="Abc@def.com" required>
          <span id="errE"></span>
        </div>
        <div class="col-md-2 mt-4 g-5">
          <input type="button" id="btnfetch" value="Fetch" class="btn btn-outline-primary" style="width: 150px;height: 45px;">
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-md-6">
          <label for="inputName" class="form-label"
            style="font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">Name</label>
          <input type="text" class="form-control" id="inputName" name="inputName"  placeholder="Full Name" required onblur="dovalname(this,eerNa)">
          <span id="eerNa"></span>
        </div>
        <div class="col-md-6">
          <label for="inputNumber" class="form-label"
            style="font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">Contact Number</label>
          <input type="text" class="form-control" id="inputNumber" name="inputNumber" placeholder="Moblie Number" required onblur="dovalno(this,errno)">
          <span id="errno"></span>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-md-12">
          <label for="inputAddress" class="form-label"
            style="font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">Address</label>
          <input type="text" class="form-control" id="inputAddress" placeholder="1234 Main Street" name="inputAddress"
            required onblur="dovalad(this,erra)">
            <span id="erra"></span>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-md-6">
          <label for="inputCity" class="form-label"
            style="font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">City</label>
          <input type="text" class="form-control" id="inputCity" name="inputCity" placeholder="XYZ" required onblur="dovalcity(this,errc)">
          <span id="errc"></span>
        </div>
        <div class="col-md-4"><label for="inputState" class="form-label"
            style="font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">State</label>
          <select id="inputState" class="form-select" name="inputState" required onchange="dovalstate(this,eers)">
            <option value="choose" selected  >Choose</option>
            <option value="Andhra Pradesh">AP|Andhra Pradesh</option>
            <option value="Arunachal Pradesh"> AR|Arunachal Pradesh</option>
            <option value="Assam"> AS|Assam</option>
            <option value="Bihar">BR|Bihar</option>
            <option value="Chhattisgarh"> CT|Chhattisgarh</option>
            <option value="Goa"> GA|Goa</option>
            <option value="Gujarat"> GJ|Gujarat</option>
            <option value="Haryana"> HR|Haryana</option>
            <option value="Himachal"> HP|Himachal Pradesh</option>
            <option value="Jammu and Kashmir"> JK|Jammu and Kashmir</option>
            <option value="Punjab"> PB|Punjab</option>
            <option value="Rajasthan"> RJ|Rajasthan</option>
          </select>
          <span id="eers"></span>
        </div>
        <div class="col-md-2">
          <label for="inputZip" class="form-label"
            style="font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">Zip</label>
          <input type="text" class="form-control" id="inputZip" placeholder="Area Code" name="inputZip" required onblur="dovalzip(this,eerz)">
          <span id="eerz"></span>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-md-8">
          <label for="inputPicture" class="form-label"
            style="font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">Profile-Picture</label>
          <input type="file" class="form-control" id="inputPicture" onchange="doshowprofile(this)" name="profilepic">
        </div>
        <div class="col-md-2">
            <img src="pics/nopic.png" alt="" width="150px" height="150px" id="profilepicshow">
          </div>
      </div>
      <div class="row mt-3" style="padding-bottom: 10px;">
        <div class="col-md-1"></div>
        <div class="col-md-1"></div>
        <div class="col-md-1"></div>
        <div class="col-md-1"></div>
        <div class="col-md-1"></div>
        <div class="col-md-1">
          <button type="submit" formaction="/profileprocess" class="btn btn-outline-primary" style="width: 100px;">Submit</button>
        </div>
        <div class="col-md-6">
          <input type="submit" formaction="/updateprocess" value="Update" id="btn" class="btn btn-outline-primary" style="width: 100px;">
        </div>
      </div>
    </div>
  </form>
</body>

</html>